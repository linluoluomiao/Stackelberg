# Stackelberg
博弈论复现代码
# 基于Stackelberg博弈的多用户多任务卸载算法

## 1. 项目概述

本项目复现了论文《Stackelberg-Game-Based Multi-User Multi-Task Offloading in Mobile Edge Computing》中的核心算法，实现了基于Stackelberg博弈的多用户多任务卸载决策模型。

## 2. 系统模型

### 2.1 网络架构
- **用户设备(UE)**: 拥有有限的计算资源，可选择本地执行任务或卸载到边缘服务器
- **边缘服务器(MEC Server)**: 拥有强大的计算资源，为用户提供计算服务并收取费用

### 2.2 博弈模型
- **领导者**: 边缘服务器，决策变量为计算服务价格
- **跟随者**: 用户，决策变量为任务卸载策略
- **博弈过程**: 边缘服务器先确定价格，用户根据价格优化卸载决策，最终达到Stackelberg均衡

## 3. 代码结构

```
stackelberg_offloading.py
├── SystemModel类: 系统参数初始化与管理
├── User类: 用户卸载决策优化
├── EdgeServer类: 边缘服务器利润计算
├── StackelbergGame类: 博弈求解与性能评估
├── Visualizer类: 结果可视化
└── main函数: 程序入口
```

## 4. 核心算法

### 4.1 用户成本函数
- **本地执行成本**: 时间成本 + 加权能耗成本
- **边缘执行成本**: 传输时间成本 + 计算时间成本 + 加权能耗成本 + 计算服务成本

### 4.2 服务器利润函数
- **收益**: 服务价格 × 计算资源使用量
- **成本**: 计算资源维护成本
- **利润**: 收益 - 成本

### 4.3 博弈求解算法
1. 初始化边缘服务器价格
2. 迭代求解：
   - 给定当前价格，用户优化卸载决策
   - 基于用户响应，边缘服务器优化价格
3. 重复步骤2，直到价格收敛

## 5. 使用方法

### 5.1 运行环境
- Python 3.7+
- 依赖库: numpy, matplotlib, scipy

### 5.2 安装依赖
```bash
pip install numpy matplotlib scipy
```

### 5.3 运行代码
```bash
python stackelberg_offloading.py
```

### 5.4 结果输出
- 控制台输出：价格变化、用户总成本、服务器总利润、卸载决策
- 可视化结果：
  - 价格变化对比图
  - 卸载决策矩阵图
  - 性能对比图

## 6. 关键参数说明

| 参数 | 含义 | 单位 | 默认范围 |
|------|------|------|----------|
| f_local | 本地计算能力 | CPU cycles/s | 0.05-0.2 GHz |
| f_edge | 边缘计算能力 | CPU cycles/s | 80-150 GHz |
| P_local | 本地计算功率 | W | 0.8-2.0 W |
| P_transmit | 传输功率 | W | 0.05-0.2 W |
| cpu_cycles | 任务所需CPU周期 | CPU cycles | 800-2000 M cycles |
| data_sizes | 任务数据量 | bits | 2-10 M bits |
| bandwidth | 通信带宽 | Hz | 150-300 MHz |
| channel_gains | 信道增益 | - | 5e-8-5e-6 |
| prices | 边缘计算价格 | $/CPU cycle | 2.78e-10-2.78e-9 $/cycle |

## 7. 结果分析

### 7.1 价格优化
- 边缘服务器会根据用户需求调整价格，平衡收益与用户需求
- 不同服务器可能形成差异化定价策略
- 实验结果显示，价格收敛速度快，仅需1次迭代即可达到均衡

### 7.2 卸载决策
- 计算密集型任务更倾向于卸载到边缘服务器
- 通信条件好的用户更倾向于卸载任务
- 价格较低的服务器会吸引更多任务
- 实验结果显示，所有任务都选择卸载到边缘服务器，卸载率达到100%
- 所有任务都卸载到了服务器1，服务器2的利用率为0%，说明需要进一步优化任务分配

### 7.3 系统性能
- 优化后用户总成本降低到23.95美元
- 边缘服务器获得正利润，达到32.99美元
- 系统资源利用率提高，服务器1的利用率为7.89%
- 整体系统实现了双赢的效果，边缘服务器获得了可观的利润，用户也降低了任务执行成本

## 8. 扩展与改进

### 8.1 模型扩展
- 考虑多个边缘服务器之间的竞争
- 引入任务优先级和截止时间约束
- 考虑动态网络环境

### 8.2 算法改进
- 采用更高效的优化算法
- 考虑不完全信息博弈
- 引入深度学习预测用户行为
